<h1 style="text-align: center;"> Discover </h1>
    <!-- Search button -->
       <form id="search-form">
           <div class="input-group p-3">
               <input type="text" class="form-control" placeholder="Find clothes!" id="search-input" aria-label="Search">
               <div class="input-group-append">
                   <button class="btn btn-dark" type="button">Search</button>
               </div>
            </div>
        </div>
        <! Display cards >
        <! Outline from events lab, will update with table data>
    <div class="container">
        <div class="row">
            {{#if items.length}}
                {{#each items}}
                <div class="col-md-4 col-lg-3 mb-4 d-flex justify-content-center">
                    <div class="card" style="max-width: 400px; max-height: auto">
                        <img src="{{#if this.item_img.length}}{{this.item_img}}{{else}}/resources/img/cartoon_outfit.jpeg{{/if}}" class="card-img-top" alt="{{this.name}}">
                        <div class="card-body">
                            <h5 class="card-title">{{this.name}}</h5>
                            <p class="card-text">
                               <!-- Based on api, might be able to add description tags -->
                               <!-- Add a description of the item in the card text -->
                                {{#if this.description}}
                                    {{this.description}}
                                {{else}}
                                    No outfit description.
                                {{/if}}
                            </p>
                            <!-- Wishlist button -->
                            {{#if this.item_id}}
                            <button class="btn btn-outline-warning" id="addWishlistItem" data-item-id="{{this.item_id}}">
                                <span class="bi bi-star-fill" style="color: orange;"></span>
                                Wishlist
                            </button>
                            {{else}}
                                Unable to Wishlist
                            {{/if}}
                        </div>
                    </div>
                </div>
                {{/each}}
            {{else}}
                <p>No items found.</p>
            {{/if}}
        </div>
        </div>
    </div>
<script>
    document.getElementById('addWishlistItem').addEventListener('click', async function (event) {
        event.preventDefault(); // Prevent the default form submission (page refresh)

        const formData = {
            item_id: document.getElementById('addWishlistItem').value,
        };

        try {
            const response = await fetch('/wishlist', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            });

            const result = await response.json();
            if (result.success) {
                console.log('Data saved successfully!');
            } else {
                console.log('Error: ' + result.message);
            }
        } catch (error) {
            console.log('An error occurred: ' + error.message);
        }
    });
</script>